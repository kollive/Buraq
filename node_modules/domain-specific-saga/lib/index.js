"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = transform;

var _marked = [transform].map(regeneratorRuntime.mark);

function transform(iterator) {
  var rules = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];

  var ret, _iterator$next, value, done;

  return regeneratorRuntime.wrap(function transform$(_context) {
    while (1) {
      switch (_context.prev = _context.next) {
        case 0:
          ret = void 0;

        case 1:
          if (!true) {
            _context.next = 11;
            break;
          }

          _iterator$next = iterator.next(ret), value = _iterator$next.value, done = _iterator$next.done;

          if (!done) {
            _context.next = 5;
            break;
          }

          return _context.abrupt("return", value);

        case 5:

          value = rules.reduce(function (p, t) {
            return t(p);
          }, value);
          _context.next = 8;
          return value;

        case 8:
          ret = _context.sent;
          _context.next = 1;
          break;

        case 11:
        case "end":
          return _context.stop();
      }
    }
  }, _marked[0], this);
}